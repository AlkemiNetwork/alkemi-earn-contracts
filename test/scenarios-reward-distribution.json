{
	"Borrow: Torrey supplies OMG and borrows Ether to get ALK rewards": [
		["AddToken", "Ether"],
		["SetAssetValue", "Ether", "1.0"],
		["AddSupportedAssetToRewardControl", "Ether"],
		["SetInterestRate", "Ether", ["FixedRate", 0.5, 0.75]],
		["Approve", "Geoff", "Ether", "10.0e18"],
		["Faucet", "Geoff", "Ether", "10.0e18"],
		["Supply", "Geoff", "Ether", "10.0e18"],
		["Assert", ["Success"]],
		["FastForwardWithRewardControl", 1, "blocks"],
		["AddToken", "OMG"],
		["AddCash", "OMG", "1e20"],
		["SetAssetValue", "OMG", "1.0"],
		["AddSupportedAssetToRewardControl", "OMG"],
		["SetInterestRate", "OMG", ["FixedRate", 0.5, 0.75]],
		["Approve", "Torrey", "OMG", "5.0e18"],
		["Faucet", "Torrey", "OMG", "5.0e18"],
		["Supply", "Torrey", "OMG", "2.5e18"],
		["FastForwardWithRewardControl", 1, "blocks"],
		["Supply", "Torrey", "OMG", "2.5e18"],
		["Borrow", "Geoff", "Ether", "2.0e18"],
		["Assert", ["Success"]],
        ["Assert", ["Equal", ["BalanceSheetSupply", "OMG"], ["Exactly", "6.250000000000000000e18"]]],
      	[
			"Assert",
			["Equal", ["SupplyBalance", "Torrey", "OMG"], ["Exactly", "6.250000000000000000e18"]]
		],
      	[
			"Assert",
			["Equal", ["AlkSpeed", "OMG"], ["Exactly", "1.600734692307692300e18"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplyIndex", "OMG"], ["Exactly", "3.32952816e35"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplyIndexBlock", "OMG"], ["Exactly", "1002"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplierIndex", "OMG", "Torrey"], ["Exactly", "3.32952816e35"]]
		],
        [
			"Assert",
			["Equal", ["AlkAccrued", "Torrey"], ["Exactly", "0"]]
		],
		[
			"Assert",
			["Equal", ["TokenBalance", "Torrey", "ALK"], ["Exactly", "0"]]
		],
        ["FastForwardWithRewardControl", 1, "blocks"],
		["ClaimAlk", "Torrey"],
		["Assert", ["Success"]],
        ["Assert", ["Equal", ["BalanceSheetSupply", "OMG"], ["Exactly", "6.250000000000000000e18"]]],
      	[
			"Assert",
			["Equal", ["SupplyBalance", "Torrey", "OMG"], ["Exactly", "9.375000000000000000e18"]]
		],
        [
			"Assert",
			["Equal", ["BorrowBalance", "Torrey", "OMG"], ["Exactly", "0"]]
		],
        [
			"Assert",
			["Equal", ["AlkSpeed", "OMG"], ["Exactly", "1.600734692307692300e18"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplyIndex", "OMG"], ["Exactly", "5.8907036676923075e35"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplyIndexBlock", "OMG"], ["Exactly", "1003"]]
		],
      	[
			"Assert",
			["Equal", ["AlkSupplierIndex", "OMG", "Torrey"], ["Exactly", "5.8907036676923075e35"]]
		],
		[
			"Assert",
			["Equal", ["AlkAccrued", "Torrey"], ["Exactly", "0"]]
		],
		[
			"Assert",
			["Equal", ["TokenBalance", "Torrey", "ALK"], ["Exactly", "2.401102038461538300e18"]]
		],
		[
			"Assert",
			["Equal", ["AlkBorrowIndex", "Ether"], ["Exactly", "1.279308445400753e+36"]]
		],
      	[
			"Assert",
			["Equal", ["AlkBorrowerIndex", "Ether", "Torrey"], ["Exactly", "1.279308445400753e+36"]]
		],
		["FastForwardWithRewardControl", 1, "blocks"],
		["Borrow", "Torrey", "Ether", "2.5e18"],
		["Assert", ["Success"]],
		[
			"Assert",
			["Equal", ["AlkBorrowerIndex", "Ether", "Torrey"], ["Exactly", "2.646318769626166e+36"]]
		],
		[
			"Assert",
			["Equal", ["AlkAccrued", "Torrey"], ["Exactly", "0"]]
		],
		["FastForwardWithRewardControl", 1, "blocks"],
		["Borrow", "Torrey", "Ether", "2.5e18"],
		["Assert", ["Success"]],
		[
			"Assert",
			["Equal", ["TokenBalance", "Torrey", "Ether"], ["Exactly", "5e18"]]
		],
		[
			"Assert",
			["Equal", ["AlkSpeed", "Ether"], ["Exactly", "2.908594593745935000e18"]]
		],
		[
			"Assert",
			["Equal", ["AlkBorrowIndex", "Ether"], ["Exactly", "3.292027415146409e+36"]]
		],
		[
			"Assert",
			["Equal", ["AlkBorrowIndexBlock", "Ether"], ["Exactly", "1005"]]
		],
      	[
			"Assert",
			["Equal", ["AlkBorrowerIndex", "Ether", "Torrey"], ["Exactly", "3.292027415146409e+36"]]
		],
		[
			"Assert",
			["Equal", ["AlkAccrued", "Torrey"], ["Exactly", "2.827800299475214300e18"]]
		],
		["ClaimAlk", "Torrey"],
		["Assert", ["Success"]],
		[
			"Assert",
			["Equal", ["AlkAccrued", "Torrey"], ["Exactly", "0"]]
		],
		[
			"Assert",
			["Equal", ["TokenBalance", "Torrey", "ALK"], ["Exactly", "11.495480369207079000e18"]]
		]
	],
	"Withdraw: Withdraw should refresh supply index": [
		["AddToken", "Ether"],
		["SetAssetValue", "Ether", "1.0"],
		["AddSupportedAssetToRewardControl", "Ether"],
		["SetInterestRate", "Ether", ["FixedRate", 0.5, 0.75]],
		["Approve", "Geoff", "Ether", "1.0e18"],
		["Faucet", "Geoff", "Ether", "1.0e18"],
		["Supply", "Geoff", "Ether", "1.0e18"],
		["Assert", ["Success"]],
		[
			"Assert",
			["Equal", ["SupplyBalance", "Geoff", "Ether"], ["Exactly", "1.0e18"]]
		],
		[
			"Assert",
			["Equal", ["TokenBalance", "Geoff", "Ether"], ["Exactly", "0"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplyIndex", "Ether"], ["Exactly", "0"]]
		],
      	["Approve", "Torrey", "Ether", "2.0e18"],
		["Faucet", "Torrey", "Ether", "2.0e18"],
		["FastForwardWithRewardControl", 1, "blocks"],
		["Supply", "Torrey", "Ether", "1.0e18"],
		["Assert", ["Success"]],
		["Assert", ["Equal", ["BalanceSheetSupply", "Ether"], ["Exactly", "2.0e18"]]],
		[
			"Assert",
			["Equal", ["SupplyBalance", "Torrey", "Ether"], ["Exactly", "1.0e18"]]
		],
		[
			"Assert",
			["Equal", ["TokenBalance", "Torrey", "Ether"], ["Exactly", "1.0e18"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplyIndex", "Ether"], ["Exactly", "4.1619102e+36"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplierIndex", "Ether", "Torrey"], ["Exactly", "4.1619102e+36"]]
		],
      	[
			"Assert",
			["Equal", ["AlkAccrued", "Torrey"], ["Exactly", "0"]]
		],
		["FastForwardWithRewardControl", 1, "blocks"],
		["Assert", ["Equal", ["BalanceSheetSupply", "Ether"], ["Exactly", "2.0e18"]]],
		[
			"Assert",
			["Equal", ["SupplyBalance", "Torrey", "Ether"], ["Exactly", "1.5e18"]]
		],
        ["Withdraw", "Torrey", "Ether", "1.0e18"],
		[
			"Assert",
			["Equal", ["SupplyBalance", "Torrey", "Ether"], ["Exactly", "0.5e18"]]
		],
		[
			"Assert",
			["Equal", ["TokenBalance", "Torrey", "Ether"], ["Exactly", "2.0e18"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplyIndex", "Ether"], ["Exactly", "6.2428653e+36"]]
		],
		[
			"Assert",
			["Equal", ["AlkSupplierIndex", "Ether", "Torrey"], ["Exactly", "6.2428653e+36"]]
		],
        [
			"Assert",
			["Equal", ["AlkAccrued", "Torrey"], ["Exactly", "3.121432650000000000e18"]]
		]
    ]
}











